<!DOCTYPE html>

<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
    </head>
    <body style="margin: 0px;">
        <div style="padding-top: 8px;padding-left:8px;">
            <div id="mainDiv" style="border: 5px solid black; height:500px; width:700px;position: relative;"></div>
        
        </div>
        <script>
            
         var takenSpots = [];   
         var mainDiv = document.getElementById("mainDiv");
         var Br1 = [{x:10,y:10},{x:600,y:10},{x:10,y:20},{x:600,y:20}];
         var pacman = [{x:10,y:10},{x:30,y:10},{x:10,y:30},{x:30,y:30}];
         
         function creatSpotKey(x,y){
         var strSpot = x +","+ y;
         return strSpot;
         }
         function mapSpot(){
            for(var i = 0 ; i < barrierArray.length ; i++){
                var left = barrierArray[i].style.left.split("px")[0]*1;
                var top = barrierArray[i].style.top.split("px")[0]*1;
                var width = barrierArray[i].style.width.split("px")[0]*1;
                var height = barrierArray[i].style.height.split("px")[0]*1;
                for(var y = top ; y < top+height ; y++){
                    for(var x = left ; x < left+width ; x++){
                        var key = creatSpotKey(x,y);
                        takenSpots[key] = 1;    

                    }
                }                    
                
            }
         }
         
         function findIfTaken(x,y){
            
            return takenSpots[creatSpotKey(x,y)]; //true or false
         }
         
         function draw(Br, parentDiv,color,top,left){
         var div = document.createElement("div");
         div.style.height = (Br[2].y - Br[0].y) + 'px';
         div.style.width = (Br[1].x - Br[0].x) + 'px';
         div.style.position = "absolute";
         div.style.top = top + 'px';
         div.style.left = left + 'px';
         div.style.backgroundColor = color;
         parentDiv.appendChild(div); 
         return div;
         }
     
         function drawPacman(Br, parentDiv,color,top,left){
         var div = draw(Br, parentDiv,color,top,left);
         div.style.border = "1px solid yellow";
         div.style.borderRadius = "10px";
         return div;
         }
         var packmenDiv = drawPacman(pacman,mainDiv,"yellow",0,0);

         var barrierArray = [];
         barrierArray[0] = draw(Br1,mainDiv,"red",30,0);
         barrierArray[1] = draw(Br1,mainDiv,"red",70,110);
         barrierArray[2] = draw(Br1,mainDiv,"red",110,0);
         barrierArray[3] = draw(Br1,mainDiv,"red",150,110);
         barrierArray[4] = draw(Br1,mainDiv,"red",190,0);
         barrierArray[5] = draw(Br1,mainDiv,"red",230,110);
         barrierArray[6] = draw(Br1,mainDiv,"red",270,110);
         barrierArray[7] = draw(Br1,mainDiv,"red",310,0);
         barrierArray[8] = draw(Br1,mainDiv,"red",350,40);
         barrierArray[9] = draw(Br1,mainDiv,"red",390,110);
         barrierArray[10] = draw(Br1,mainDiv,"red",430,0);
         barrierArray[11] = draw(Br1,mainDiv,"red",470,110);
         
         window.addEventListener("keypress",movePacman,false);
         mapSpot();
         
         function movePacman(event){
             var code = event.keyCode;
             var left = packmenDiv.style.left.split("px")[0]*1;
             var top = packmenDiv.style.top.split("px")[0]*1;
             if (code === 97 &&  left > 0  && !findIfTaken(left-3,top+3) && !findIfTaken(left-3,top+23) )
      
            {
                left = left - 3;//move 3 px left
                packmenDiv.style.left = left + "px";
             }
            
            else if (code === 100 && left <680 && !findIfTaken(left+23,top+3)&& !findIfTaken(left+23,top+23)){
                left = left + 3;//move 3 px right
                packmenDiv.style.left = left + "px";
             }
            else if (code === 119 && top >0 &&!findIfTaken(left-3,top-3)&&!findIfTaken(left+23,top-3)){
                top = top - 3;//move 3 px up
                packmenDiv.style.top = top + "px";
             }
             
            else if (code === 120 && top <490 && !findIfTaken(left-3,top+23) && !findIfTaken(left+23,top+23) ){
                top = top + 3;//move 3 px down
                packmenDiv.style.top = top + "px";
             } 
        
             
             
         }
         
         </script>   
       
    </body>
</html>
